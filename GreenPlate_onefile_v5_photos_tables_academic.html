<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GreenPlate — Smart campus menu</title>

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root{
      --bg:#f6fbf8;
      --card:#ffffff;
      --text:#0b2a1b;
      --muted:#3a6a55;
      --brand:#126E45;
      --brand2:#2BCB82;
      --border:rgba(15,94,60,.14);
      --shadow:0 10px 30px rgba(2, 6, 23, .10);
      --radius:18px;
      --max:1120px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(900px 500px at 20% -10%, rgba(43,203,130,.18), transparent 60%),
                  radial-gradient(700px 380px at 85% 0%, rgba(18,110,69,.18), transparent 55%),
                  var(--bg);
      color:var(--text);
    }
    a{color:inherit; text-decoration:none}
    .container{max-width:var(--max); margin:0 auto; padding:22px 18px}
    header{
      position:sticky; top:0; z-index:10;
      background: rgba(246,251,248,.75);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--border);
    }
    .nav{display:flex; align-items:center; justify-content:space-between; gap:14px}
    .left{display:flex; align-items:center; gap:14px}
    .brand{display:flex; align-items:center; gap:12px}
    .uni{display:flex; align-items:center; gap:10px; padding-left:10px; border-left:1px solid var(--border)}
    .uni img{width:34px; height:34px; border-radius:10px; object-fit:contain; background:rgba(255,255,255,.7); border:1px solid var(--border)}
    .uni .uniText{line-height:1.15}
    .uni .uniText b{display:block; font-size:12px}
    .uni .uniText span{display:block; font-size:11px; color:var(--muted); font-weight:600}
    .navlinks{display:flex; align-items:center; gap:12px; flex-wrap:wrap; justify-content:flex-end}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:999px; border:1px solid var(--border);
      background: rgba(255,255,255,.65);
      font-weight:800; color:#123b28;
    }
    .pill.active{background: rgba(43,203,130,.18); border-color: rgba(18,110,69,.38)}
    .pill:hover{transform: translateY(-1px); box-shadow: 0 8px 18px rgba(2, 6, 23, .08)}
    .lang{display:flex; gap:8px; align-items:center; margin-left:6px}
    .langBtn{
      cursor:pointer; user-select:none;
      padding:10px 10px; border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.75);
      font-weight:900; font-size:12px; letter-spacing:.3px; color:#123b28;
    }
    .langBtn.active{background: rgba(43,203,130,.20); border-color: rgba(18,110,69,.40)}
    .card{
      background: rgba(255,255,255,.84);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    h1{margin:0 0 10px; font-size:38px; line-height:1.1}
    h2{margin:0; font-size:22px}
    h3{margin:0; font-size:16px}
    .lead{margin:0; color:var(--muted); font-size:15px; line-height:1.65}
    .page{display:none}
    .page.active{display:block}
    .hero{padding:26px 0 10px; display:grid; grid-template-columns: 1.1fr .9fr; gap:18px; align-items:start}
    @media (max-width: 920px){ .hero{grid-template-columns:1fr} .uni{display:none} }
    .heroCard{padding:22px}
    .ctaRow{margin-top:14px; display:flex; gap:12px; flex-wrap:wrap; align-items:center}
    .btn{
      cursor:pointer;
      display:inline-flex; align-items:center; justify-content:center;
      padding:12px 14px; border-radius:12px;
      border:1px solid rgba(18,110,69,.22);
      background:#fff; font-weight:900;
    }
    .btnPrimary{background: linear-gradient(135deg, var(--brand2), var(--brand)); color:#08311f; border:0}
    .btn:active{transform: translateY(1px)}
    .kpis{display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; padding:18px}
    @media (max-width: 540px){ .kpis{grid-template-columns:1fr} }
    .kpi{padding:14px; border-radius:16px; border:1px solid var(--border); background:rgba(255,255,255,.75)}
    .kpi b{display:block; font-size:18px}
    .kpi span{display:block; margin-top:6px; color:var(--muted); font-size:13px; font-weight:700}
    .section{margin-top:16px}
    .sectionHead{display:flex; align-items:flex-end; justify-content:space-between; gap:12px; padding:16px}
    .toolbar{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      padding:12px 16px; border-top:1px solid var(--border);
      background: rgba(255,255,255,.6);
      border-radius: 0 0 var(--radius) var(--radius);
    }
    .toggle{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px; border-radius:999px; border:1px solid var(--border);
      background:#fff; font-weight:800; font-size:12px; color:#123b28;
    }
    .toggle input{accent-color: var(--brand)}
    .field{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:10px 12px; border-radius:14px; border:1px solid var(--border); background:#fff;
      font-size:13px; color:#123b28; font-weight:900;
    }
    .field input, .field select{
      width:220px; max-width:60vw;
      padding:8px 10px; border-radius:10px; border:1px solid var(--border); font-weight:800;
      background:#fff;
    }
    .grid{display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; padding:16px}
    @media (max-width: 980px){ .grid{grid-template-columns:repeat(2,1fr)} }
    @media (max-width: 640px){ .grid{grid-template-columns:1fr} }
    .dish{padding:14px}
    .dishTop{display:flex; align-items:flex-start; justify-content:space-between; gap:10px}
    .meta{margin-top:8px; display:flex; gap:8px; flex-wrap:wrap}
    .tag{
      font-size:12px; font-weight:900; color:#11412b;
      padding:6px 8px; border-radius:999px;
      background: rgba(43,203,130,.16);
      border:1px solid rgba(18,110,69,.20);
    }
    .tag.gray{background: rgba(17,65,43,.06)}
    .dish p{margin:10px 0 0; color:var(--muted); font-size:13px; line-height:1.55; font-weight:600}
    .actions{margin-top:12px; display:flex; gap:10px; flex-wrap:wrap}
    .miniBtn{
      cursor:pointer; border:1px solid var(--border); background:#fff;
      padding:8px 10px; border-radius:12px; font-weight:900; font-size:12px;
    }
    .miniBtn.primary{border:0; background: rgba(43,203,130,.18)}
    .row{display:flex; gap:12px; flex-wrap:wrap; padding:16px}
    .row > *{flex:1}
    .box{padding:14px; border-radius:16px; border:1px solid var(--border); background:#fff}
    .box h4{margin:0 0 10px; font-size:13px}
    .list{margin:0; padding-left:18px; color:var(--muted); font-size:13px; line-height:1.65; font-weight:600}
    .prose{padding:16px}
    .prose p{margin:0 0 12px; color:var(--muted); line-height:1.75; font-weight:600}
    .prose h3{margin:18px 0 10px}
    table{width:100%; border-collapse:separate; border-spacing:0; overflow:hidden; border-radius:14px; border:1px solid var(--border)}
    th, td{padding:10px 12px; font-size:13px; border-bottom:1px solid var(--border)}
    th{background: rgba(43,203,130,.12); text-align:left; font-weight:900; color:#123b28}
    tr:last-child td{border-bottom:none}
    footer{
      margin-top:18px;
      padding:18px 0 34px;
      color:var(--muted);
      font-size:12px;
      font-weight:650;
    }
    
    .mediaGrid{display:grid; grid-template-columns: 1.2fr .8fr; gap:12px; padding:16px}
    @media (max-width: 920px){ .mediaGrid{grid-template-columns:1fr} }
    .heroImg{
      width:100%; height:100%; min-height:240px; border-radius:18px;
      border:1px solid var(--border); object-fit:cover;
      box-shadow: 0 10px 26px rgba(2,6,23,.10);
      background: rgba(255,255,255,.6);
    }
    .gallery{display:grid; grid-template-columns:repeat(3, 1fr); gap:12px; padding:16px}
    @media (max-width: 900px){ .gallery{grid-template-columns:repeat(2, 1fr)} }
    @media (max-width: 620px){ .gallery{grid-template-columns:1fr} }
    .shot{
      width:100%; height:170px; border-radius:18px; border:1px solid var(--border);
      object-fit:cover; background:#fff;
    }
    .caption{font-size:12px; color:var(--muted); font-weight:650; margin-top:8px; line-height:1.5}

    /* modal */
    .modalBackdrop{position:fixed; inset:0; display:none; place-items:center; background: rgba(2, 6, 23, .42); z-index:50; padding:18px;}
    .modal{width:min(860px, 100%); border-radius:22px; overflow:hidden}
    .modalHeader{padding:16px 16px 10px; display:flex; align-items:flex-start; justify-content:space-between; gap:12px}
    .close{cursor:pointer; border:1px solid var(--border); background:#fff; border-radius:12px; padding:8px 10px; font-weight:900}
    .modalBody{padding:0 16px 16px}
    .cols{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
    @media (max-width: 760px){ .cols{grid-template-columns:1fr} }
    .steps{margin:0; padding-left:18px; color:#123b28; font-size:13px; line-height:1.7; font-weight:650}
    .mutedSmall{display:block; margin-top:8px; color:var(--muted); font-weight:650; font-size:12px}
  </style>
</head>

<body>
<header>
  <div class="container">
    <div class="nav">
      <div class="left">
        <div class="brand" aria-label="GreenPlate brand">
          <!-- Selected logo: Seal + CO₂ + tagline -->
          <svg width="300" height="64" viewBox="0 0 360 76" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
            <defs>
              <linearGradient id="seal" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#2BCB82"/>
                <stop offset="1" stop-color="#126E45"/>
              </linearGradient>
              <filter id="soft" x="-20%" y="-20%" width="140%" height="140%">
                <feDropShadow dx="0" dy="5" stdDeviation="5" flood-color="#0b2a1b" flood-opacity="0.14"/>
              </filter>
            </defs>
            <g filter="url(#soft)">
              <circle cx="40" cy="38" r="22" fill="url(#seal)"/>
            </g>
            <circle cx="40" cy="38" r="14" fill="none" stroke="#E9FFF3" stroke-width="3"/>
            <path d="M28 28c7 0 10 6 10 12-7 0-12-4-12-10 0-1 1-2 2-2z" fill="#E9FFF3"/>
            <text x="40" y="45" text-anchor="middle" font-family="Inter, Arial, sans-serif" font-size="12" font-weight="800" fill="#E9FFF3">CO₂</text>
            <text x="78" y="44" font-family="Inter, Arial, sans-serif" font-size="30" font-weight="760" fill="#0E3B26">
              Green<tspan fill="#126E45">Plate</tspan>
            </text>
            <text x="80" y="63" font-family="Inter, Arial, sans-serif" font-size="12" font-weight="500" fill="#356B52" data-i18n="logo_tagline">
              Smart campus menu • nutrition • allergens • footprint
            </text>
          </svg>
        </div>

        <!-- University badge (logo + name + address) -->
        <div class="uni" aria-label="University">
          <img id="uniLogo" alt="University logo" src="https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg">
          <div class="uniText">
            <b id="uniName">Antalya Bilim University</b>
            <span id="uniAddr">Döşemealtı, Antalya</span>
          </div>
        </div>
      </div>

      <nav class="navlinks" aria-label="Navigation">
        <a class="pill" data-route="/home" href="#/home" data-i18n="nav_home">Home</a>
        <a class="pill" data-route="/menu" href="#/menu" data-i18n="nav_menu">Menu</a>
        <a class="pill" data-route="/recipes" href="#/recipes" data-i18n="nav_recipes">Recipes</a>
        <a class="pill" data-route="/sustainability" href="#/sustainability" data-i18n="nav_sustain">Sustainability</a>
        <a class="pill" data-route="/method" href="#/method" data-i18n="nav_method">How CO₂ is calculated</a>
        <a class="pill" data-route="/what" href="#/what">What we do</a>
        <a class="pill" data-route="/about" href="#/about" data-i18n="nav_about">About us</a>
        <a class="pill" data-route="/get" href="#/get">Get involved</a>

        <div class="lang" role="group" aria-label="Language">
          <button class="langBtn" data-lang="en">EN</button>
          <button class="langBtn" data-lang="tr">TR</button>
          <button class="langBtn" data-lang="ru">RU</button>
        </div>
      </nav>
    </div>
  </div>
</header>

<main class="container">

  <!-- HOME -->
  <section class="page active" id="page-home">
    <div class="hero">
      <div class="card heroCard">
        <h1 data-i18n="hero_title">Smart campus menu, with nutrition and CO₂.</h1>
        <p class="lead" style="margin-top:10px" data-i18n="hero_lead">
          GreenPlate automatically turns the university’s daily menu into clear dish cards:
          calories, ingredients, allergens, nutritional values, and carbon footprint.
          Built as a pilot—adaptable to any institution.
        </p>
        <div class="ctaRow">
          <a class="btn btnPrimary" href="#/menu" data-i18n="cta_open_menu">Open the menu</a>
          <a class="btn" href="#/sustainability" data-i18n="cta_open_dash">Open sustainability dashboard</a>
        </div>
        <span class="mutedSmall" data-i18n="home_note">
          Tip: Language selection is saved on the device, so students and lecturers don’t need to switch every time.
        </span>
      </div>

      <div class="card">
        <div class="mediaGrid" style="padding:16px 18px 0;">
          <img class="heroImg" alt="Sustainable campus dining" src="https://images.unsplash.com/photo-1543353071-873f17a7a088?auto=format&fit=crop&w=1400&q=70">
          <div class="box" style="margin:0;">
            <h4 style="margin-bottom:8px" data-i18n="home_visual_title">A healthier, lower‑impact choice</h4>
            <p class="lead" style="font-size:13px; margin:0" data-i18n="home_visual_p">
              Nutritional transparency and carbon awareness can reduce confusion, improve trust, and encourage better campus food decisions.
            </p>
          </div>
        </div>
        <div class="kpis">
          <div class="kpi">
            <b id="kpiDishes">—</b>
            <span data-i18n="kpi_dishes">Dishes shown</span>
          </div>
          <div class="kpi">
            <b id="kpiCalories">—</b>
            <span data-i18n="kpi_kcal">Total kcal (selected day)</span>
          </div>
          <div class="kpi">
            <b id="kpiCO2">—</b>
            <span data-i18n="kpi_co2">Total CO₂e (selected day)</span>
          </div>
        </div>
      </div>
    </div>

    <div class="card section">
      <div class="sectionHead">
        <div>
          <h2 data-i18n="home_why_title">Why GreenPlate?</h2>
          <p class="lead" data-i18n="home_why_sub">A practical platform for the cafeteria that improves transparency, health choices, and sustainability.</p>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <h4 data-i18n="home_why_1_t">For students</h4>
          <ul class="list">
            <li data-i18n="home_why_1_a">Check allergens before eating.</li>
            <li data-i18n="home_why_1_b">See calories and macros for better choices.</li>
            <li data-i18n="home_why_1_c">Compare dishes by carbon footprint.</li>
          </ul>
        </div>
        <div class="box">
          <h4 data-i18n="home_why_2_t">For lecturers & administration</h4>
          <ul class="list">
            <li data-i18n="home_why_2_a">Supports sustainability education.</li>
            <li data-i18n="home_why_2_b">Creates a single, official menu page for the week.</li>
            <li data-i18n="home_why_2_c">Helps communicate dietary information clearly.</li>
          </ul>
        </div>
        <div class="box">
          <h4 data-i18n="home_why_3_t">For the cafeteria</h4>
          <ul class="list">
            <li data-i18n="home_why_3_a">Reduces repeated questions about ingredients and allergens.</li>
            <li data-i18n="home_why_3_b">Encourages smarter portioning and less waste.</li>
            <li data-i18n="home_why_3_c">Makes updates easy: weekly PDF → structured menu.</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- MENU -->
  <section class="page" id="page-menu">
    <div class="card">
      <div class="sectionHead">
        <div>
          <h2 data-i18n="menu_title">Weekly cafeteria menu</h2>
          <p class="lead" data-i18n="menu_sub">
            Choose a day to see dish cards. This demo uses sample dishes—later we will automate weekly updates from the official PDF.
          </p>
        </div>
        <div class="field">
          <span data-i18n="label_portions">Portions</span>
          <input id="portionInput" type="number" min="1" value="1"/>
        </div>
      </div>

      <div class="toolbar">
        <label class="toggle"><input id="filterLowCarbon" type="checkbox"> <span data-i18n="filter_lowcarbon">Low carbon</span></label>
        <label class="toggle"><input id="filterGlutenFree" type="checkbox"> <span data-i18n="filter_glutenfree">Gluten-free</span></label>
        <div class="field" style="flex:1; min-width:280px">
          <span data-i18n="source_label">Menu PDF URL</span>
          <input id="pdfUrl" type="text" value="https://admin.antalya.edu.tr/files/418/8_12_25-12_12_25_HAFTALIK_MENU.pdf"/>
        </div>
        <button class="btn" id="openPdfBtn" data-i18n="source_open">Open PDF</button>
      </div>

      <div class="row" style="padding-top:0">
        <div class="box" style="flex:1.3">
          <h4 data-i18n="source_title">Official weekly menu source</h4>
          <ul class="list">
            <li data-i18n="source_desc_1">GreenPlate can always show the official PDF to users as the single source of truth.</li>
            <li data-i18n="source_desc_2">For a professional auto-update, a scheduled GitHub Action can download the PDF, convert it into menu.json, and redeploy the site.</li>
          </ul>
          <span class="mutedSmall" data-i18n="source_desc_3">
            This is the best approach for GitHub Pages, because it avoids browser CORS restrictions.
          </span>
        </div>
        <div class="box">
          <h4 data-i18n="auto_options">Auto-update options</h4>
          <ul class="list">
            <li data-i18n="opt_a">A) Link the official PDF (fastest)</li>
            <li data-i18n="opt_b">B) Parse PDF in the browser (may be blocked by CORS)</li>
            <li data-i18n="opt_c">C) GitHub Action → menu.json (most reliable)</li>
          </ul>
        </div>
      </div>

      <div class="row" style="padding-top:0">
        <div class="box" style="flex:1">
          <h4 data-i18n="day_pick">Pick a day</h4>
          <div id="dayChips" class="meta"></div>
        </div>
        <div class="box" style="flex:1">
          <h4 data-i18n="menu_hint">What you see on each card</h4>
          <ul class="list">
            <li data-i18n="menu_hint_1">Dish name (EN/TR/RU)</li>
            <li data-i18n="menu_hint_2">Calories + macros per selected portions</li>
            <li data-i18n="menu_hint_3">Allergens and ingredient list</li>
            <li data-i18n="menu_hint_4">Carbon footprint (kg CO₂e)</li>
          </ul>
        </div>
      </div>

      <div class="grid" id="menuGrid"></div>
    </div>
  </section>

  <!-- RECIPES -->
  <section class="page" id="page-recipes">
    <div class="card">
      <div class="sectionHead">
        <div>
          <h2 data-i18n="recipes_title">Recipes and ingredients</h2>
          <p class="lead" data-i18n="recipes_sub">
            Every dish has ingredients, allergens, nutrition and step-by-step instructions. In real use, dishes come from the weekly menu source.
          </p>
        </div>
        <div class="field">
          <span data-i18n="recipes_find">Find dish</span>
          <input id="recipeSearch" type="text" placeholder="Search…"/>
        </div>
      </div>

      <div class="grid" id="recipesGrid"></div>
    </div>
  </section>

  <!-- SUSTAINABILITY -->
  <section class="page" id="page-sustainability">
    <div class="card">
      <div class="sectionHead">
        <div>
          <h2 data-i18n="sus_title">Sustainability dashboard</h2>
          <p class="lead" data-i18n="sus_sub">
            Track carbon footprint by dish and by day. This page also explains why food sustainability matters on campus.
          </p>
        </div>
        <div class="field"><span data-i18n="label_totalco2">Total CO₂e</span><span id="totalCO2">—</span></div>
      </div>

      <div class="row" style="padding-top:0">
        <div class="box" style="flex:1.1">
          <h4 data-i18n="sus_why_title">Why sustainability in a university cafeteria?</h4>
          <p class="lead" style="font-size:13px; margin:0" data-i18n="sus_why_p">
            Food systems have a measurable climate impact. When students can compare dishes, they can make informed choices,
            and the cafeteria can also reduce waste and improve sourcing over time.
          </p>
        </div>
        <div class="box">
          <h4 data-i18n="sus_actions_title">What GreenPlate enables</h4>
          <ul class="list">
            <li data-i18n="sus_actions_1">Transparent CO₂ labels for each dish.</li>
            <li data-i18n="sus_actions_2">Weekly summary for reporting and education.</li>
            <li data-i18n="sus_actions_3">Comparison of “low carbon” options.</li>
          </ul>
        </div>
      </div>

      <div class="prose">
        <h3 data-i18n="sus_table_title">Example carbon footprint table</h3>
        <p data-i18n="sus_table_p">
          In the pilot, GreenPlate stores per-ingredient emission factors and calculates dish totals based on the recipe.
          Below is an illustrative table (you can later replace with your chosen dataset).
        </p>

        <table>
          <thead>
            <tr>
              <th data-i18n="tbl_ing">Ingredient</th>
              <th data-i18n="tbl_unit">Unit</th>
              <th data-i18n="tbl_factor">Emission factor</th>
              <th data-i18n="tbl_note">Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td data-i18n="tbl_row_1_a">Beef</td>
              <td data-i18n="tbl_row_1_b">kg</td>
              <td data-i18n="tbl_row_1_c">~ 25–60 kg CO₂e / kg</td>
              <td data-i18n="tbl_row_1_d">Depends on production system</td>
            </tr>
            <tr>
              <td data-i18n="tbl_row_2_a">Chicken</td>
              <td data-i18n="tbl_row_2_b">kg</td>
              <td data-i18n="tbl_row_2_c">~ 5–10 kg CO₂e / kg</td>
              <td data-i18n="tbl_row_2_d">Generally lower than beef</td>
            </tr>
            <tr>
              <td data-i18n="tbl_row_3_a">Legumes</td>
              <td data-i18n="tbl_row_3_b">kg</td>
              <td data-i18n="tbl_row_3_c">~ 0.5–2 kg CO₂e / kg</td>
              <td data-i18n="tbl_row_3_d">Often among lowest</td>
            </tr>
            <tr>
              <td data-i18n="tbl_row_4_a">Vegetables</td>
              <td data-i18n="tbl_row_4_b">kg</td>
              <td data-i18n="tbl_row_4_c">~ 0.2–2 kg CO₂e / kg</td>
              <td data-i18n="tbl_row_4_d">Seasonality and transport matter</td>
            </tr>
          </tbody>
        </table>

        <h3 style="margin-top:16px" data-i18n="sus_chart_title">CO₂ per dish (selected day)</h3>
        <div class="box">
          <canvas id="co2Chart" height="110"></canvas>
        </div>
      </div>

      <div class="sectionHead" style="border-top:1px solid var(--border); margin-top:0;">
        <div>
          <h2 data-i18n="sus_gallery_t">Campus food & sustainability</h2>
          <p class="lead" data-i18n="sus_gallery_p">Visual context for the project: transparent menus, plant-forward options, and responsible sourcing.</p>
        </div>
      </div>
      <div class="gallery">
        <div>
          <img class="shot" alt="Cafeteria tray" src="https://images.unsplash.com/photo-1529692236671-f1f6cf9683ba?auto=format&fit=crop&w=1200&q=70">
          <div class="caption" data-i18n="sus_g1">Clear information helps students compare meals at a glance.</div>
        </div>
        <div>
          <img class="shot" alt="Vegetarian bowl" src="https://images.unsplash.com/photo-1512621776951-a57141f2eefd?auto=format&fit=crop&w=1200&q=70">
          <div class="caption" data-i18n="sus_g2">Plant-forward dishes usually have lower footprints and high nutritional value.</div>
        </div>
        <div>
          <img class="shot" alt="Ingredient prep" src="https://images.unsplash.com/photo-1543352634-99a5d6951ee7?auto=format&fit=crop&w=1200&q=70">
          <div class="caption" data-i18n="sus_g3">Recipes and ingredient lists support allergen safety and trust.</div>
        </div>
      </div>

    </div>
  </section>

  <!-- METHOD -->
  <section class="page" id="page-method">
    <div class="card">
      <div class="sectionHead">
        <div>
          <h2 data-i18n="meth_title">How carbon footprint is calculated</h2>
          <p class="lead" data-i18n="meth_sub">
            GreenPlate uses a transparent recipe-based approach: ingredient amounts × emission factors, adjusted for portion size.
          </p>
        </div>
      </div>

      <div class="prose">
        <h3 data-i18n="meth_part_1_t">1) Recipe → ingredient list</h3>
        <p data-i18n="meth_part_1_p">
          Each dish includes an ingredient list and (optionally) quantities. If the cafeteria only provides dish names,
          GreenPlate can use a standardized recipe template for the pilot and improve it over time with the kitchen team.
        </p>

        <h3 data-i18n="meth_part_2_t">2) Ingredient amount × emission factor</h3>
        <p data-i18n="meth_part_2_p">
          For each ingredient, we multiply the ingredient amount (in kg) by its emission factor (kg CO₂e per kg).
          The sum across all ingredients is the dish footprint. This can be extended to include cooking energy and packaging.
        </p>

        <div class="box">
          <h4 data-i18n="meth_formula_t">Simple formula</h4>
          <p class="lead" style="font-size:13px; margin:0" data-i18n="meth_formula_p">
            Dish CO₂e = Σ (ingredient_kg × factor_kgCO₂e_per_kg) × portions
          </p>
        </div>

        <h3 data-i18n="meth_part_3_t">3) Uncertainty and transparency</h3>
        <p data-i18n="meth_part_3_p">
          Emission factors vary by country, farming method, and transport. GreenPlate should show the data source
          and clearly label values as “estimated”. For the pilot, a consistent dataset is chosen to keep comparisons fair.
        </p>

        <h3 data-i18n="meth_part_4_t">4) What’s next for a stronger model</h3>
        <ul class="list">
          <li data-i18n="meth_next_1">Add kitchen-specific quantities for each recipe.</li>
          <li data-i18n="meth_next_2">Include food waste (leftovers) and portion optimization.</li>
          <li data-i18n="meth_next_3">Add seasonal/locally sourced multipliers.</li>
          <li data-i18n="meth_next_4">Publish a weekly campus sustainability summary.</li>
        </ul>
      </div>
    </div>
  </section>

  
  <!-- WHAT WE DO -->
  <section class="page" id="page-what">
    <div class="card">
      <div class="sectionHead">
        <div>
          <h2>What we do</h2>
          <p class="lead">
            GreenPlate connects the university cafeteria menu with nutrition data,
            allergens and sustainability metrics in one transparent platform.
          </p>
        </div>
      </div>
      <div class="prose">
        <p><b>GreenPlate</b> is an academic pilot for Antalya Bilim University that operationalizes campus sustainability through food information. The platform consolidates the weekly cafeteria menu into a structured, searchable interface and enriches each dish with standardized recipe metadata: ingredients, allergens, nutritional values, and estimated carbon footprint.</p>
        <p>The project is designed to support <b>evidence‑based decision‑making</b> for students and staff. By presenting comparable metrics (kcal, macros, allergens, CO₂e) in a consistent format, GreenPlate reduces information asymmetry and enables healthier and lower‑impact choices without adding friction to everyday dining.</p>
        <p>From an institutional perspective, GreenPlate can function as a lightweight reporting layer. Weekly summaries and dish‑level metrics can inform sustainability initiatives, nutrition education, and procurement discussions (e.g., plant‑forward options, seasonal sourcing, and waste reduction).</p>

        <table style="margin-top:14px">
          <thead>
            <tr>
              <th>Component</th>
              <th>What students see</th>
              <th>What the university gains</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Menu transparency</td>
              <td>One official page for the week</td>
              <td>Fewer repeated questions; clearer communication</td>
            </tr>
            <tr>
              <td>Health information</td>
              <td>Calories, macros, allergens</td>
              <td>Supports nutrition literacy</td>
            </tr>
            <tr>
              <td>Carbon footprint</td>
              <td>Comparable CO₂ labels</td>
              <td>Measurable sustainability education</td>
            </tr>
          </tbody>
        </table>
        <span class="mutedSmall">This page text can be translated via the language switcher in the next refinement step (UI i18n is already enabled).</span>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section class="page" id="page-about">
    <div class="card">
      <div class="sectionHead">
        <div>
          <h2 data-i18n="about_title">About this project</h2>
          <p class="lead" data-i18n="about_sub">
            GreenPlate is a smart meal-information platform for campus dining: menu, recipes, allergens, nutrition and carbon footprint.
          </p>
        </div>
      </div>

      <div class="row" style="padding-top:0">
        <div class="box" style="flex:1.2">
          <h4 data-i18n="about_uni_t">University information</h4>
          <ul class="list">
            <li><span data-i18n="about_uni_name">Institution:</span> <b id="aboutUniName">Antalya Bilim University</b></li>
            <li><span data-i18n="about_uni_addr">Address:</span> <b id="aboutUniAddr">Döşemealtı, Antalya</b></li>
            <li><span data-i18n="about_uni_site">Menu source (PDF):</span> <b id="aboutUniPdf">admin.antalya.edu.tr</b></li>
          </ul>
          <span class="mutedSmall" data-i18n="about_uni_note">
            You can replace the logo URL and address with official details (and add a map link) when you have them.
          </span>
        </div>
        <div class="box">
          <h4 data-i18n="about_settings_t">Quick settings (demo)</h4>
          <div class="field" style="margin-bottom:10px">
            <span data-i18n="set_logo">University logo URL</span>
            <input id="uniLogoUrl" type="text" value="https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg"/>
          </div>
          <div class="field" style="margin-bottom:10px">
            <span data-i18n="set_name">University name</span>
            <input id="uniNameInput" type="text" value="Antalya Bilim University"/>
          </div>
          <div class="field">
            <span data-i18n="set_addr">Address / campus</span>
            <input id="uniAddrInput" type="text" value="Döşemealtı, Antalya"/>
          </div>
          <div class="ctaRow" style="margin-top:12px">
            <button class="btn btnPrimary" id="saveUniBtn" data-i18n="set_save">Save</button>
          </div>
        </div>
      </div>

      
      <div class="sectionHead" style="border-top:1px solid var(--border)">
        <div>
          <h2 data-i18n="about_media_t">Project visuals</h2>
          <p class="lead" data-i18n="about_media_p">A clean, campus-ready interface for menu transparency, allergy safety, and sustainability learning.</p>
        </div>
      </div>
      <div class="gallery" style="padding-top:0">
        <div>
          <img class="shot" alt="Menu interface" src="https://images.unsplash.com/photo-1556761175-b413da4baf72?auto=format&fit=crop&w=1200&q=70">
          <div class="caption" data-i18n="about_m1">A single official weekly menu page reduces confusion.</div>
        </div>
        <div>
          <img class="shot" alt="Nutrition label" src="https://images.unsplash.com/photo-1585238342028-4a5c1f2b2d21?auto=format&fit=crop&w=1200&q=70">
          <div class="caption" data-i18n="about_m2">Nutrition and allergen information supports safer choices.</div>
        </div>
        <div>
          <img class="shot" alt="Sustainability" src="https://images.unsplash.com/photo-1526401485004-2aa6b21d7b21?auto=format&fit=crop&w=1200&q=70">
          <div class="caption" data-i18n="about_m3">Carbon metrics can be used for education and reporting.</div>
        </div>
      </div>
<div class="prose">
        <h3 data-i18n="about_scope_t">Scope and future work</h3>
        <p data-i18n="about_scope_p1">
          As a pilot, GreenPlate focuses on a feasible scope that still demonstrates academic value: weekly menu ingestion, a curated recipe/ingredient layer, and transparent estimations of nutrition and carbon footprint. The architecture is intentionally modular so that the platform can be expanded with verified kitchen quantities, additional dishes, and a formally cited emissions dataset.
        </p>
        <p data-i18n="about_scope_p2">
          From a deployment standpoint, GitHub Pages is a static host. To achieve true “automatic updates” when a new weekly PDF is published, GreenPlate can use a scheduled GitHub Action that downloads the official PDF, converts it into a structured JSON feed, and redeploys the site. This approach is reliable, auditable, and suitable for a university pilot.
        </p>
      </div>
    </div>

    <footer>
      <span data-i18n="footer_note">
        GreenPlate • Single-file demo with multi-page navigation • Replace sample data with the official university feed.
      </span>
    </footer>
  </section>

</main>

<!-- Recipe modal -->
<div class="modalBackdrop" id="modal">
  <div class="card modal">
    <div class="modalHeader">
      <div>
        <h3 id="mTitle">Recipe</h3>
        <div class="meta" id="mMeta"></div>
      </div>
      <button class="close" id="mClose"><span data-i18n="modal_close">Close</span></button>
    </div>
    <div class="modalBody">
      <div class="cols">
        <div class="box">
          <h4 data-i18n="modal_ing">Ingredients</h4>
          <ul class="list" id="mIngr"></ul>
        </div>
        <div class="box">
          <h4 data-i18n="modal_all">Allergens</h4>
          <ul class="list" id="mAll"></ul>
        </div>
        <div class="box">
          <h4 data-i18n="modal_nut">Nutrition per portion</h4>
          <ul class="list" id="mNut"></ul>
        </div>
        <div class="box">
          <h4 data-i18n="modal_steps">Steps</h4>
          <ol class="steps" id="mSteps"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // =============================
  // Data model (demo) with TR/EN/RU
  // =============================
  const MENU = {
    "Monday": [
      {
        id: "lentil_soup",
        name: { en: "Lentil Soup", tr: "Mercimek Çorbası", ru: "Чечевичный суп" },
        description: {
          en: "Classic lentil soup with mild spices.",
          tr: "Hafif baharatlarla klasik mercimek çorbası.",
          ru: "Классический суп из чечевицы с мягкими специями."
        },
        calories_kcal: 180,
        co2_kg: 0.65,
        allergens: {
          en: ["None (check kitchen cross-contact)"],
          tr: ["Yok (mutfak çapraz bulaşma olabilir)"],
          ru: ["Нет (возможен перекрёстный контакт на кухне)"]
        },
        ingredients: {
          en: ["Red lentils", "Onion", "Carrot", "Tomato paste", "Olive oil", "Spices", "Salt"],
          tr: ["Kırmızı mercimek", "Soğan", "Havuç", "Domates salçası", "Zeytinyağı", "Baharatlar", "Tuz"],
          ru: ["Красная чечевица", "Лук", "Морковь", "Томатная паста", "Оливковое масло", "Специи", "Соль"]
        },
        macros_g: { protein: 10, carbs: 26, fat: 4 },
        recipe_steps: {
          en: ["Rinse lentils.", "Sauté onion/carrot.", "Add lentils + water, simmer.", "Blend, season and serve."],
          tr: ["Mercimeği yıkayın.", "Soğan/havuç soteleyin.", "Mercimek + su ekleyip pişirin.", "Blenderdan geçirip servis edin."],
          ru: ["Промойте чечевицу.", "Обжарьте лук/морковь.", "Добавьте чечевицу + воду и варите.", "Пюрируйте, приправьте и подавайте."]
        }
      },
      {
        id: "chicken_rice",
        name: { en: "Chicken with Rice", tr: "Tavuk Pilav", ru: "Курица с рисом" },
        description: {
          en: "Roasted chicken served with rice pilaf.",
          tr: "Pilav ile servis edilen fırınlanmış tavuk.",
          ru: "Запечённая курица с рисовым пловом."
        },
        calories_kcal: 520,
        co2_kg: 2.40,
        allergens: {
          en: ["May contain gluten (kitchen)", "May contain dairy (kitchen)"],
          tr: ["Gluten içerebilir (mutfak)", "Süt ürünü içerebilir (mutfak)"],
          ru: ["Может содержать глютен (кухня)", "Может содержать молочные продукты (кухня)"]
        },
        ingredients: {
          en: ["Chicken", "Rice", "Butter (optional)", "Broth", "Salt", "Pepper"],
          tr: ["Tavuk", "Pirinç", "Tereyağı (opsiyonel)", "Et suyu", "Tuz", "Karabiber"],
          ru: ["Курица", "Рис", "Сливочное масло (по желанию)", "Бульон", "Соль", "Перец"]
        },
        macros_g: { protein: 32, carbs: 58, fat: 16 },
        recipe_steps: {
          en: ["Cook rice in broth.", "Roast or grill chicken.", "Serve together; adjust seasoning."],
          tr: ["Pilavı et suyuyla pişirin.", "Tavuğu fırınlayın veya ızgara yapın.", "Birlikte servis edin."],
          ru: ["Приготовьте рис на бульоне.", "Запеките или обжарьте курицу.", "Подавайте вместе, отрегулируйте специи."]
        }
      },
      {
        id: "season_salad",
        name: { en: "Seasonal Salad", tr: "Mevsim Salata", ru: "Сезонный салат" },
        description: {
          en: "Fresh greens, tomato, cucumber, lemon dressing.",
          tr: "Taze yeşillikler, domates, salatalık, limon sosu.",
          ru: "Свежая зелень, помидор, огурец, лимонная заправка."
        },
        calories_kcal: 140,
        co2_kg: 0.25,
        allergens: { en: ["None"], tr: ["Yok"], ru: ["Нет"] },
        ingredients: {
          en: ["Lettuce", "Tomato", "Cucumber", "Lemon", "Olive oil", "Salt"],
          tr: ["Marul", "Domates", "Salatalık", "Limon", "Zeytinyağı", "Tuz"],
          ru: ["Салат-латук", "Помидор", "Огурец", "Лимон", "Оливковое масло", "Соль"]
        },
        macros_g: { protein: 3, carbs: 12, fat: 9 },
        recipe_steps: {
          en: ["Chop vegetables.", "Mix dressing.", "Toss and serve."],
          tr: ["Sebzeleri doğrayın.", "Sosu karıştırın.", "Harmanlayıp servis edin."],
          ru: ["Нарежьте овощи.", "Смешайте заправку.", "Перемешайте и подавайте."]
        }
      }
    ],
    "Tuesday": [
      {
        id: "tomato_soup",
        name: { en: "Tomato Soup", tr: "Domates Çorbası", ru: "Томатный суп" },
        description: {
          en: "Tomato soup; can be made dairy-free.",
          tr: "Domates çorbası; süt ürünsüz yapılabilir.",
          ru: "Томатный суп; можно приготовить без молочных продуктов."
        },
        calories_kcal: 210,
        co2_kg: 0.55,
        allergens: {
          en: ["Dairy (if cream is used)"],
          tr: ["Süt ürünü (krema kullanılırsa)"],
          ru: ["Молочные продукты (если используется сливки)"]
        },
        ingredients: {
          en: ["Tomatoes", "Onion", "Garlic", "Olive oil", "Stock", "Cream (optional)"],
          tr: ["Domates", "Soğan", "Sarımsak", "Zeytinyağı", "Et suyu", "Krema (opsiyonel)"],
          ru: ["Помидоры", "Лук", "Чеснок", "Оливковое масло", "Бульон", "Сливки (по желанию)"]
        },
        macros_g: { protein: 5, carbs: 28, fat: 8 },
        recipe_steps: {
          en: ["Sauté aromatics.", "Add tomatoes + stock, simmer.", "Blend. Add cream if desired."],
          tr: ["Soğan-sarımsağı soteleyin.", "Domates + et suyu ekleyip pişirin.", "Blenderdan geçirip isterseniz krema ekleyin."],
          ru: ["Обжарьте лук и чеснок.", "Добавьте помидоры и бульон, варите.", "Пюрируйте, при желании добавьте сливки."]
        }
      },
      {
        id: "vegetable_pasta",
        name: { en: "Vegetable Pasta", tr: "Sebzeli Makarna", ru: "Паста с овощами" },
        description: {
          en: "Pasta with mixed vegetables.",
          tr: "Karışık sebzeli makarna.",
          ru: "Паста с ассорти из овощей."
        },
        calories_kcal: 460,
        co2_kg: 1.10,
        allergens: { en: ["Gluten"], tr: ["Gluten"], ru: ["Глютен"] },
        ingredients: {
          en: ["Pasta", "Zucchini", "Bell pepper", "Tomato sauce", "Olive oil"],
          tr: ["Makarna", "Kabak", "Biber", "Domates sosu", "Zeytinyağı"],
          ru: ["Паста", "Кабачок", "Болгарский перец", "Томатный соус", "Оливковое масло"]
        },
        macros_g: { protein: 14, carbs: 72, fat: 10 },
        recipe_steps: {
          en: ["Boil pasta.", "Sauté vegetables.", "Mix with sauce and pasta."],
          tr: ["Makarnayı haşlayın.", "Sebzeleri soteleyin.", "Sos ve makarnayla karıştırın."],
          ru: ["Отварите пасту.", "Обжарьте овощи.", "Смешайте с соусом и пастой."]
        }
      }
    ],
    "Wednesday": [
      {
        id: "beans_stew",
        name: { en: "White Beans Stew", tr: "Kuru Fasulye", ru: "Тушёная фасоль" },
        description: {
          en: "Traditional bean stew with tomato base.",
          tr: "Domates bazlı geleneksel kuru fasulye.",
          ru: "Традиционное блюдо из фасоли в томатной основе."
        },
        calories_kcal: 480,
        co2_kg: 0.95,
        allergens: {
          en: ["May contain gluten (kitchen)"],
          tr: ["Gluten içerebilir (mutfak)"],
          ru: ["Может содержать глютен (кухня)"]
        },
        ingredients: {
          en: ["White beans", "Onion", "Tomato paste", "Olive oil", "Spices"],
          tr: ["Kuru fasulye", "Soğan", "Domates salçası", "Zeytinyağı", "Baharatlar"],
          ru: ["Белая фасоль", "Лук", "Томатная паста", "Оливковое масло", "Специи"]
        },
        macros_g: { protein: 20, carbs: 68, fat: 9 },
        recipe_steps: {
          en: ["Soak beans overnight.", "Simmer until tender.", "Cook with onion + tomato paste; season."],
          tr: ["Fasulyeyi bir gece suda bekletin.", "Yumuşayana kadar pişirin.", "Soğan + salçayla pişirip baharatlayın."],
          ru: ["Замочите фасоль на ночь.", "Варите до мягкости.", "Тушите с луком и томатной пастой, приправьте."]
        }
      },
      {
        id: "yogurt",
        name: { en: "Yogurt Cup", tr: "Yoğurt", ru: "Йогурт" },
        description: {
          en: "Plain yogurt.",
          tr: "Sade yoğurt.",
          ru: "Натуральный йогурт."
        },
        calories_kcal: 160,
        co2_kg: 0.45,
        allergens: { en: ["Dairy"], tr: ["Süt ürünü"], ru: ["Молочные продукты"] },
        ingredients: {
          en: ["Milk", "Yogurt cultures"],
          tr: ["Süt", "Yoğurt kültürü"],
          ru: ["Молоко", "Закваска"]
        },
        macros_g: { protein: 9, carbs: 12, fat: 8 },
        recipe_steps: {
          en: ["Chill and serve."],
          tr: ["Soğutup servis edin."],
          ru: ["Охладите и подавайте."]
        }
      }
    ]
  };

  // =============================
  // i18n (UI)
  // =============================
  const I18N = {
    en: {
      logo_tagline:"Smart campus menu • nutrition • allergens • footprint",
      nav_home:"Home", nav_menu:"Menu", nav_recipes:"Recipes", nav_sustain:"Sustainability", nav_method:"How CO₂ is calculated", nav_about:"About",
      hero_title:"Smart campus menu, with nutrition and CO₂.",
      hero_lead:"GreenPlate automatically turns the university’s daily menu into clear dish cards: calories, ingredients, allergens, nutritional values, and carbon footprint. Built as a pilot—adaptable to any institution.",
      cta_open_menu:"Open the menu", cta_open_dash:"Open sustainability dashboard",
      home_visual_title:"A healthier, lower‑impact choice",
      home_visual_p:"Nutritional transparency and carbon awareness can reduce confusion, improve trust, and encourage better campus food decisions.",
      home_note:"Tip: Language selection is saved on the device, so students and lecturers don’t need to switch every time.",
      kpi_dishes:"Dishes shown", kpi_kcal:"Total kcal (selected day)", kpi_co2:"Total CO₂e (selected day)",
      home_why_title:"Why GreenPlate?", home_why_sub:"A practical platform for the cafeteria that improves transparency, health choices, and sustainability.",
      home_why_1_t:"For students", home_why_1_a:"Check allergens before eating.", home_why_1_b:"See calories and macros for better choices.", home_why_1_c:"Compare dishes by carbon footprint.",
      home_why_2_t:"For lecturers & administration", home_why_2_a:"Supports sustainability education.", home_why_2_b:"Creates a single, official menu page for the week.", home_why_2_c:"Helps communicate dietary information clearly.",
      home_why_3_t:"For the cafeteria", home_why_3_a:"Reduces repeated questions about ingredients and allergens.", home_why_3_b:"Encourages smarter portioning and less waste.", home_why_3_c:"Makes updates easy: weekly PDF → structured menu.",
      menu_title:"Weekly cafeteria menu", menu_sub:"Choose a day to see dish cards. This demo uses sample dishes—later we will automate weekly updates from the official PDF.",
      label_portions:"Portions", filter_lowcarbon:"Low carbon", filter_glutenfree:"Gluten-free",
      source_label:"Menu PDF URL", source_open:"Open PDF",
      source_title:"Official weekly menu source", source_desc_1:"GreenPlate can always show the official PDF to users as the single source of truth.",
      source_desc_2:"For a professional auto-update, a scheduled GitHub Action can download the PDF, convert it into menu.json, and redeploy the site.",
      source_desc_3:"This is the best approach for GitHub Pages, because it avoids browser CORS restrictions.",
      auto_options:"Auto-update options", opt_a:"A) Link the official PDF (fastest)", opt_b:"B) Parse PDF in the browser (may be blocked by CORS)", opt_c:"C) GitHub Action → menu.json (most reliable)",
      day_pick:"Pick a day", menu_hint:"What you see on each card", menu_hint_1:"Dish name (EN/TR/RU)", menu_hint_2:"Calories + macros per selected portions",
      menu_hint_3:"Allergens and ingredient list", menu_hint_4:"Carbon footprint (kg CO₂e)",
      recipes_title:"Recipes and ingredients", recipes_sub:"Every dish has ingredients, allergens, nutrition and step-by-step instructions. In real use, dishes come from the weekly menu source.",
      recipes_find:"Find dish",
      sus_title:"Sustainability dashboard", sus_sub:"Track carbon footprint by dish and by day. This page also explains why food sustainability matters on campus.",
      label_totalco2:"Total CO₂e",
      sus_why_title:"Why sustainability in a university cafeteria?", sus_why_p:"Food systems have a measurable climate impact. When students can compare dishes, they can make informed choices, and the cafeteria can also reduce waste and improve sourcing over time.",
      sus_actions_title:"What GreenPlate enables", sus_actions_1:"Transparent CO₂ labels for each dish.", sus_actions_2:"Weekly summary for reporting and education.", sus_actions_3:"Comparison of “low carbon” options.",
      sus_table_title:"Example carbon footprint table", sus_table_p:"In the pilot, GreenPlate stores per-ingredient emission factors and calculates dish totals based on the recipe. Below is an illustrative table (you can later replace with your chosen dataset).",
      tbl_ing:"Ingredient", tbl_unit:"Unit", tbl_factor:"Emission factor", tbl_note:"Notes",
      tbl_row_1_a:"Beef", tbl_row_1_b:"kg", tbl_row_1_c:"~ 25–60 kg CO₂e / kg", tbl_row_1_d:"Depends on production system",
      tbl_row_2_a:"Chicken", tbl_row_2_b:"kg", tbl_row_2_c:"~ 5–10 kg CO₂e / kg", tbl_row_2_d:"Generally lower than beef",
      tbl_row_3_a:"Legumes", tbl_row_3_b:"kg", tbl_row_3_c:"~ 0.5–2 kg CO₂e / kg", tbl_row_3_d:"Often among lowest",
      tbl_row_4_a:"Vegetables", tbl_row_4_b:"kg", tbl_row_4_c:"~ 0.2–2 kg CO₂e / kg", tbl_row_4_d:"Seasonality and transport matter",
      sus_chart_title:"CO₂ per dish (selected day)",
      sus_gallery_t:"Campus food & sustainability",
      sus_gallery_p:"Visual context for the project: transparent menus, plant-forward options, and responsible sourcing.",
      sus_g1:"Clear information helps students compare meals at a glance.",
      sus_g2:"Plant-forward dishes usually have lower footprints and high nutritional value.",
      sus_g3:"Recipes and ingredient lists support allergen safety and trust.",
      meth_title:"How carbon footprint is calculated", meth_sub:"GreenPlate uses a transparent recipe-based approach: ingredient amounts × emission factors, adjusted for portion size.",
      meth_part_1_t:"1) Recipe → ingredient list", meth_part_1_p:"Each dish includes an ingredient list and (optionally) quantities. If the cafeteria only provides dish names, GreenPlate can use a standardized recipe template for the pilot and improve it over time with the kitchen team.",
      meth_part_2_t:"2) Ingredient amount × emission factor", meth_part_2_p:"For each ingredient, we multiply the ingredient amount (in kg) by its emission factor (kg CO₂e per kg). The sum across all ingredients is the dish footprint. This can be extended to include cooking energy and packaging.",
      meth_formula_t:"Simple formula", meth_formula_p:"Dish CO₂e = Σ (ingredient_kg × factor_kgCO₂e_per_kg) × portions",
      meth_part_3_t:"3) Uncertainty and transparency", meth_part_3_p:"Emission factors vary by country, farming method, and transport. GreenPlate should show the data source and clearly label values as “estimated”. For the pilot, a consistent dataset is chosen to keep comparisons fair.",
      meth_part_4_t:"4) What’s next for a stronger model", meth_next_1:"Add kitchen-specific quantities for each recipe.", meth_next_2:"Include food waste (leftovers) and portion optimization.",
      meth_next_3:"Add seasonal/locally sourced multipliers.", meth_next_4:"Publish a weekly campus sustainability summary.",
      meth_example_t:"Worked example (illustrative)",
      meth_example_p:"Suppose a dish uses 0.12 kg chicken, 0.18 kg rice, and 0.08 kg vegetables per portion. Using emission factors, we estimate:",
      ex_col_1:"Ingredient", ex_col_2:"Amount (kg)", ex_col_3:"Factor (kg CO₂e/kg)", ex_col_4:"Subtotal (kg CO₂e)",
      ex_r1_1:"Chicken", ex_r2_1:"Rice", ex_r3_1:"Vegetables", ex_total:"Total",
      meth_example_note:"Values are estimates for demonstration. A pilot should use one consistent dataset and cite the source.",
      about_title:"About this project", about_sub:"GreenPlate is a smart meal-information platform for campus dining: menu, recipes, allergens, nutrition and carbon footprint.",
      about_uni_t:"University information", about_uni_name:"Institution:", about_uni_addr:"Address:", about_uni_site:"Menu source (PDF):", about_uni_note:"You can replace the logo URL and address with official details (and add a map link) when you have them.",
      about_settings_t:"Quick settings (demo)", set_logo:"University logo URL", set_name:"University name", set_addr:"Address / campus", set_save:"Save",
      about_media_t:"Project visuals",
      about_media_p:"A clean, campus-ready interface for menu transparency, allergy safety, and sustainability learning.",
      about_m1:"A single official weekly menu page reduces confusion.",
      about_m2:"Nutrition and allergen information supports safer choices.",
      about_m3:"Carbon metrics can be used for education and reporting.",
      about_scope_t:"Scope and future work", about_scope_p1:"For a pilot, GreenPlate can start with weekly menu parsing and a small recipe database. Over time, the platform can be expanded with more dishes, verified kitchen recipes, and a stronger emissions dataset.",
      about_scope_p2:"Technically, GitHub Pages hosts static files. To automatically update when the university publishes a new weekly PDF, we can add a GitHub Action that downloads the PDF, converts it into JSON, and redeploys the site.",
      footer_note:"GreenPlate • Single-file demo with multi-page navigation • Replace sample data with the official university feed.",
      modal_ing:"Ingredients", modal_all:"Allergens", modal_nut:"Nutrition per portion", modal_steps:"Steps", modal_close:"Close",
      btn_recipe:"Recipe", btn_ing:"Ingredients", btn_all:"Allergens",
      tag_kcal:"kcal", tag_co2:"kg CO₂e"
    },
    tr: {
      logo_tagline:"Akıllı kampüs menüsü • besin • alerjen • ayak izi",
      nav_home:"Ana sayfa", nav_menu:"Menü", nav_recipes:"Tarifler", nav_sustain:"Sürdürülebilirlik", nav_method:"CO₂ nasıl hesaplanır", nav_about:"Hakkında",
      hero_title:"Akıllı kampüs menüsü: besin ve CO₂ bilgisiyle.",
      hero_lead:"GreenPlate, üniversitenin günlük menüsünü otomatik olarak anlaşılır kartlara dönüştürür: kalori, içerik, alerjen, besin değerleri ve karbon ayak izi. Pilot olarak tasarlandı—her kuruma uyarlanabilir.",
      cta_open_menu:"Menüyü aç", cta_open_dash:"Sürdürülebilirlik panosu",
      home_visual_title:"Daha sağlıklı, daha düşük etkili seçim",
      home_visual_p:"Besin şeffaflığı ve karbon farkındalığı, kafa karışıklığını azaltır, güveni artırır ve kampüste daha iyi yemek seçimlerini destekler.",
      home_note:"İpucu: Dil seçimi cihazda kaydedilir; öğrenciler ve hocalar her seferinde değiştirmek zorunda kalmaz.",
      kpi_dishes:"Gösterilen yemek", kpi_kcal:"Toplam kalori (seçilen gün)", kpi_co2:"Toplam CO₂e (seçilen gün)",
      home_why_title:"Neden GreenPlate?", home_why_sub:"Yemekhane için şeffaflık, sağlıklı seçim ve sürdürülebilirliği destekleyen pratik bir platform.",
      home_why_1_t:"Öğrenciler için", home_why_1_a:"Yemeden önce alerjenleri kontrol edin.", home_why_1_b:"Daha iyi seçim için kalori ve makroları görün.", home_why_1_c:"Karbon ayak izine göre karşılaştırın.",
      home_why_2_t:"Akademisyenler & yönetim için", home_why_2_a:"Sürdürülebilirlik eğitimini destekler.", home_why_2_b:"Hafta için tek resmi menü sayfası oluşturur.", home_why_2_c:"Diyet bilgisini net iletmeye yardımcı olur.",
      home_why_3_t:"Yemekhane için", home_why_3_a:"İçerik ve alerjen sorularını azaltır.", home_why_3_b:"Daha iyi porsiyonlama ve daha az israf sağlar.", home_why_3_c:"Güncellemeyi kolaylaştırır: haftalık PDF → yapılandırılmış menü.",
      menu_title:"Haftalık yemekhane menüsü", menu_sub:"Bir gün seçin ve kartları görün. Bu demo örnek veridir—sonra resmi PDF’den otomatik güncelleme ekleyeceğiz.",
      label_portions:"Porsiyon", filter_lowcarbon:"Düşük karbon", filter_glutenfree:"Glütensiz",
      source_label:"Menü PDF bağlantısı", source_open:"PDF'yi aç",
      source_title:"Resmi haftalık menü kaynağı", source_desc_1:"GreenPlate, tek doğru kaynak olarak resmi PDF’yi her zaman kullanıcıya gösterebilir.",
      source_desc_2:"Profesyonel oto-güncelleme için zamanlanmış GitHub Action PDF’yi indirir, menu.json’a çevirir ve siteyi yeniden yayınlar.",
      source_desc_3:"GitHub Pages için en güvenilir yaklaşım budur; tarayıcı CORS engellerini aşar.",
      auto_options:"Otomatik güncelleme", opt_a:"A) Resmi PDF'ye link (en hızlı)", opt_b:"B) PDF'yi tarayıcıda ayrıştır (CORS olabilir)", opt_c:"C) GitHub Action → menu.json (en güvenilir)",
      day_pick:"Gün seç", menu_hint:"Kartlarda ne var?", menu_hint_1:"Yemek adı (EN/TR/RU)", menu_hint_2:"Seçilen porsiyona göre kalori + makro",
      menu_hint_3:"Alerjenler ve içerik listesi", menu_hint_4:"Karbon ayak izi (kg CO₂e)",
      recipes_title:"Tarifler ve içerikler", recipes_sub:"Her yemekte içerik, alerjen, besin ve adım adım tarif vardır. Gerçekte yemekler haftalık menüden gelir.",
      recipes_find:"Yemek ara",
      sus_title:"Sürdürülebilirlik panosu", sus_sub:"Yemek ve gün bazında karbon ayak izini takip edin. Bu sayfa ayrıca yemekte sürdürülebilirliğin neden önemli olduğunu açıklar.",
      label_totalco2:"Toplam CO₂e",
      sus_why_title:"Üniversite yemekhanesinde sürdürülebilirlik neden önemli?", sus_why_p:"Gıda sistemlerinin ölçülebilir bir iklim etkisi vardır. Öğrenciler yemekleri karşılaştırınca bilinçli seçim yapabilir; yemekhane de israfı azaltıp tedariki iyileştirebilir.",
      sus_actions_title:"GreenPlate ne sağlar?", sus_actions_1:"Her yemek için şeffaf CO₂ etiketleri.", sus_actions_2:"Raporlama ve eğitim için haftalık özet.", sus_actions_3:"“Düşük karbon” seçeneklerini karşılaştırma.",
      sus_table_title:"Örnek karbon ayak izi tablosu", sus_table_p:"Pilot aşamasında GreenPlate, malzeme başına emisyon faktörlerini tutar ve tarif üzerinden toplamı hesaplar. Aşağıdaki tablo örnektir (sonra veri setinizi koyabilirsiniz).",
      tbl_ing:"Malzeme", tbl_unit:"Birim", tbl_factor:"Emisyon faktörü", tbl_note:"Not",
      tbl_row_1_a:"Sığır eti", tbl_row_1_b:"kg", tbl_row_1_c:"~ 25–60 kg CO₂e / kg", tbl_row_1_d:"Üretime göre değişir",
      tbl_row_2_a:"Tavuk", tbl_row_2_b:"kg", tbl_row_2_c:"~ 5–10 kg CO₂e / kg", tbl_row_2_d:"Genelde sığırdan düşük",
      tbl_row_3_a:"Baklagiller", tbl_row_3_b:"kg", tbl_row_3_c:"~ 0.5–2 kg CO₂e / kg", tbl_row_3_d:"En düşükler arasında",
      tbl_row_4_a:"Sebzeler", tbl_row_4_b:"kg", tbl_row_4_c:"~ 0.2–2 kg CO₂e / kg", tbl_row_4_d:"Mevsim ve taşıma etkiler",
      sus_chart_title:"Yemek başına CO₂ (seçilen gün)",
      sus_gallery_t:"Kampüste yemek & sürdürülebilirlik",
      sus_gallery_p:"Proje için görsel bağlam: şeffaf menüler, bitki ağırlıklı seçenekler ve sorumlu tedarik.",
      sus_g1:"Net bilgi, öğrencilerin yemekleri hızlıca karşılaştırmasına yardımcı olur.",
      sus_g2:"Bitki ağırlıklı yemekler genelde daha düşük ayak izi ve yüksek besin değerine sahiptir.",
      sus_g3:"Tarif ve içerik listeleri alerjen güvenliği ve güven sağlar.",
      meth_title:"Karbon ayak izi nasıl hesaplanır", meth_sub:"GreenPlate şeffaf bir tarif-temelli yaklaşım kullanır: miktar × emisyon faktörü, porsiyonla ölçeklenir.",
      meth_part_1_t:"1) Tarif → malzeme listesi", meth_part_1_p:"Her yemekte malzeme listesi (ve isteğe bağlı miktar) vardır. Yemekhane sadece isim veriyorsa, pilot için standart tarif şablonları kullanılabilir ve zamanla geliştirilir.",
      meth_part_2_t:"2) Miktar × emisyon faktörü", meth_part_2_p:"Her malzeme için (kg) miktar, (kg CO₂e/kg) faktörle çarpılır. Toplam, yemeğin ayak izidir. Pişirme enerjisi ve ambalaj da eklenebilir.",
      meth_formula_t:"Basit formül", meth_formula_p:"Yemek CO₂e = Σ (malzeme_kg × faktör_kgCO₂e/kg) × porsiyon",
      meth_part_3_t:"3) Belirsizlik ve şeffaflık", meth_part_3_p:"Faktörler ülkeye, üretime ve taşımaya göre değişir. GreenPlate veri kaynağını göstermeli ve değeri “tahmini” olarak işaretlemelidir.",
      meth_part_4_t:"4) Daha güçlü model için sonraki adımlar", meth_next_1:"Her tarif için mutfağa özel miktarlar.", meth_next_2:"Atık (artık) ve porsiyon optimizasyonu.",
      meth_next_3:"Mevsim/yerel çarpanlar.", meth_next_4:"Haftalık kampüs sürdürülebilirlik özeti.",
      meth_example_t:"Örnek hesap (gösterim)",
      meth_example_p:"Bir porsiyonda 0.12 kg tavuk, 0.18 kg pirinç ve 0.08 kg sebze olduğunu varsayalım. Emisyon faktörleriyle yaklaşık hesap:",
      ex_col_1:"Malzeme", ex_col_2:"Miktar (kg)", ex_col_3:"Faktör (kg CO₂e/kg)", ex_col_4:"Ara toplam (kg CO₂e)",
      ex_r1_1:"Tavuk", ex_r2_1:"Pirinç", ex_r3_1:"Sebzeler", ex_total:"Toplam",
      meth_example_note:"Değerler örnek amaçlıdır. Pilot için tek bir tutarlı veri seti seçilip kaynak belirtilmelidir.",
      about_title:"Proje hakkında", about_sub:"GreenPlate, kampüs yemekleri için akıllı bilgi platformudur: menü, tarif, alerjen, besin ve karbon ayak izi.",
      about_uni_t:"Üniversite bilgisi", about_uni_name:"Kurum:", about_uni_addr:"Adres:", about_uni_site:"Menü kaynağı (PDF):", about_uni_note:"Logo URL ve adresi resmi bilgilerle güncelleyebilirsiniz (harita linki eklenebilir).",
      about_settings_t:"Hızlı ayarlar (demo)", set_logo:"Üniversite logo URL", set_name:"Üniversite adı", set_addr:"Adres / kampüs", set_save:"Kaydet",
      about_media_t:"Proje görselleri",
      about_media_p:"Menü şeffaflığı, alerjen güvenliği ve sürdürülebilirlik öğrenimi için kampüs uyumlu arayüz.",
      about_m1:"Tek resmi haftalık menü sayfası kafa karışıklığını azaltır.",
      about_m2:"Besin ve alerjen bilgisi daha güvenli seçimleri destekler.",
      about_m3:"Karbon metrikleri eğitim ve raporlama için kullanılabilir.",
      about_scope_t:"Kapsam ve gelecek çalışmalar", about_scope_p1:"Pilot için, haftalık menü ayrıştırma ve küçük bir tarif veritabanı yeterlidir. Zamanla doğrulanmış tarifler ve daha güçlü emisyon veri setiyle genişletilebilir.",
      about_scope_p2:"GitHub Pages statiktir. Üniversite yeni haftalık PDF yayınlayınca otomatik güncelleme için PDF’yi JSON’a çeviren ve siteyi yeniden yayınlayan GitHub Action ekleyebiliriz.",
      footer_note:"GreenPlate • Çok sayfalı gezinmeli tek HTML demo • Örnek veriyi resmi kaynakla değiştirin.",
      modal_ing:"İçindekiler", modal_all:"Alerjenler", modal_nut:"Porsiyon başına besin", modal_steps:"Adımlar", modal_close:"Kapat",
      btn_recipe:"Tarif", btn_ing:"İçindekiler", btn_all:"Alerjen",
      tag_kcal:"kcal", tag_co2:"kg CO₂e"
    },
    ru: {
      logo_tagline:"Умное кампус‑меню • питание • аллергены • след",
      nav_home:"Главная", nav_menu:"Меню", nav_recipes:"Рецепты", nav_sustain:"Экология", nav_method:"Как считается CO₂", nav_about:"О проекте",
      hero_title:"Умное меню кампуса: питание и CO₂.",
      hero_lead:"GreenPlate автоматически превращает ежедневное меню университета в понятные карточки блюд: калории, ингредиенты, аллергены, пищевая ценность и углеродный след. Сделано как пилот — можно адаптировать под любой вуз.",
      cta_open_menu:"Открыть меню", cta_open_dash:"Панель устойчивости",
      home_visual_title:"Более здоровый выбор с меньшим воздействием",
      home_visual_p:"Прозрачность по питанию и углеродному следу снижает путаницу, повышает доверие и помогает принимать лучшие решения о еде на кампусе.",
      home_note:"Подсказка: язык сохраняется на устройстве — студентам и преподавателям не нужно переключать каждый раз.",
      kpi_dishes:"Показано блюд", kpi_kcal:"Итого ккал (выбранный день)", kpi_co2:"Итого CO₂e (выбранный день)",
      home_why_title:"Зачем GreenPlate?", home_why_sub:"Практичная платформа для столовой: прозрачность, более здоровый выбор и устойчивость.",
      home_why_1_t:"Для студентов", home_why_1_a:"Проверка аллергенов до еды.", home_why_1_b:"Калории и макро‑показатели для выбора.", home_why_1_c:"Сравнение блюд по углеродному следу.",
      home_why_2_t:"Для преподавателей и администрации", home_why_2_a:"Поддержка обучения устойчивому развитию.", home_why_2_b:"Единая официальная страница меню на неделю.", home_why_2_c:"Чёткая коммуникация диетической информации.",
      home_why_3_t:"Для столовой", home_why_3_a:"Меньше повторяющихся вопросов про состав и аллергены.", home_why_3_b:"Лучше порционирование и меньше отходов.", home_why_3_c:"Лёгкие обновления: недельный PDF → структурированное меню.",
      menu_title:"Недельное меню столовой", menu_sub:"Выберите день и смотрите карточки. Это демо — позже добавим авто‑обновление из официального PDF.",
      label_portions:"Порции", filter_lowcarbon:"Низкий CO₂", filter_glutenfree:"Без глютена",
      source_label:"Ссылка на PDF‑меню", source_open:"Открыть PDF",
      source_title:"Официальный источник недельного меню", source_desc_1:"GreenPlate может всегда показывать официальный PDF как главный источник.",
      source_desc_2:"Для профессионального авто‑обновления можно настроить GitHub Action: скачать PDF → конвертировать в menu.json → перезапустить сайт.",
      source_desc_3:"Это лучший вариант для GitHub Pages, потому что обходится без проблем CORS в браузере.",
      auto_options:"Авто‑обновление", opt_a:"A) Ссылка на официальный PDF (самое быстрое)", opt_b:"B) Парсить PDF в браузере (может блокироваться CORS)", opt_c:"C) GitHub Action → menu.json (самый надёжный)",
      day_pick:"Выберите день", menu_hint:"Что есть на карточке", menu_hint_1:"Название блюда (EN/TR/RU)", menu_hint_2:"Калории + БЖУ на выбранные порции",
      menu_hint_3:"Аллергены и список ингредиентов", menu_hint_4:"Углеродный след (кг CO₂e)",
      recipes_title:"Рецепты и ингредиенты", recipes_sub:"У каждого блюда есть ингредиенты, аллергены, питание и пошаговый рецепт. В реальном использовании блюда приходят из недельного меню.",
      recipes_find:"Найти блюдо",
      sus_title:"Экологическая панель", sus_sub:"Следите за углеродным следом по блюдам и дням. Тут же — объяснение важности устойчивости на кампусе.",
      label_totalco2:"Итого CO₂e",
      sus_why_title:"Почему устойчивость важна в университетской столовой?", sus_why_p:"У продовольственных систем есть измеримое климатическое влияние. Когда студенты могут сравнивать блюда, они делают осознанный выбор, а столовая может снижать отходы и улучшать закупки.",
      sus_actions_title:"Что даёт GreenPlate", sus_actions_1:"Прозрачные CO₂‑метки для каждого блюда.", sus_actions_2:"Недельная сводка для отчётности и обучения.", sus_actions_3:"Сравнение “низкоуглеродных” вариантов.",
      sus_table_title:"Пример таблицы углеродного следа", sus_table_p:"В пилоте GreenPlate хранит эмиссионные факторы по ингредиентам и считает итог по рецепту. Таблица ниже — иллюстрация (потом заменим на выбранный датасет).",
      tbl_ing:"Ингредиент", tbl_unit:"Ед.", tbl_factor:"Эмиссионный фактор", tbl_note:"Примечание",
      tbl_row_1_a:"Говядина", tbl_row_1_b:"кг", tbl_row_1_c:"~ 25–60 кг CO₂e / кг", tbl_row_1_d:"Зависит от производства",
      tbl_row_2_a:"Курица", tbl_row_2_b:"кг", tbl_row_2_c:"~ 5–10 кг CO₂e / кг", tbl_row_2_d:"Обычно ниже говядины",
      tbl_row_3_a:"Бобовые", tbl_row_3_b:"кг", tbl_row_3_c:"~ 0.5–2 кг CO₂e / кг", tbl_row_3_d:"Часто самые низкие",
      tbl_row_4_a:"Овощи", tbl_row_4_b:"кг", tbl_row_4_c:"~ 0.2–2 кг CO₂e / кг", tbl_row_4_d:"Важны сезонность и транспорт",
      sus_chart_title:"CO₂ на блюдо (выбранный день)",
      sus_gallery_t:"Еда на кампусе и устойчивость",
      sus_gallery_p:"Визуальный контекст проекта: прозрачные меню, больше растительных блюд и ответственное снабжение.",
      sus_g1:"Понятная информация помогает сравнивать блюда с первого взгляда.",
      sus_g2:"Растительные блюда обычно имеют меньший след и хорошую питательность.",
      sus_g3:"Рецепты и состав повышают безопасность по аллергенам и доверие.",
      meth_title:"Как считается углеродный след", meth_sub:"GreenPlate использует прозрачный подход по рецепту: количества × эмиссионные факторы, с учётом порций.",
      meth_part_1_t:"1) Рецепт → список ингредиентов", meth_part_1_p:"У каждого блюда есть список ингредиентов (и опционально количества). Если столовая публикует только названия, для пилота можно использовать стандартизированные рецепты и уточнять их с кухней.",
      meth_part_2_t:"2) Количество × фактор", meth_part_2_p:"Для каждого ингредиента умножаем массу (кг) на фактор (кг CO₂e/кг). Сумма по всем ингредиентам — след блюда. Модель можно расширить энергией готовки и упаковкой.",
      meth_formula_t:"Простая формула", meth_formula_p:"CO₂e блюда = Σ (ингредиент_кг × фактор_кгCO₂e/кг) × порции",
      meth_part_3_t:"3) Неопределённость и прозрачность", meth_part_3_p:"Факторы зависят от страны, метода производства и логистики. Важно показывать источник данных и помечать значения как “оценочные”.",
      meth_part_4_t:"4) Что дальше для более сильной модели", meth_next_1:"Количества из кухни для каждого рецепта.", meth_next_2:"Учёт пищевых отходов и оптимизация порций.",
      meth_next_3:"Коэффициенты сезонности/локальности.", meth_next_4:"Недельная сводка по устойчивости кампуса.",
      meth_example_t:"Пример расчёта (иллюстрация)",
      meth_example_p:"Предположим, в порции 0.12 кг курицы, 0.18 кг риса и 0.08 кг овощей. С эмиссионными факторами получаем:",
      ex_col_1:"Ингредиент", ex_col_2:"Количество (кг)", ex_col_3:"Фактор (кг CO₂e/кг)", ex_col_4:"Подытог (кг CO₂e)",
      ex_r1_1:"Курица", ex_r2_1:"Рис", ex_r3_1:"Овощи", ex_total:"Итого",
      meth_example_note:"Значения оценочные и приведены для демонстрации. В пилоте лучше выбрать один датасет и указывать источник.",
      about_title:"О проекте", about_sub:"GreenPlate — умная платформа информации о питании на кампусе: меню, рецепты, аллергены, пищевая ценность и углеродный след.",
      about_uni_t:"Информация об университете", about_uni_name:"Учреждение:", about_uni_addr:"Адрес:", about_uni_site:"Источник меню (PDF):", about_uni_note:"Можно заменить URL логотипа и адрес на официальные данные (и добавить ссылку на карту).",
      about_settings_t:"Быстрые настройки (демо)", set_logo:"URL логотипа", set_name:"Название университета", set_addr:"Адрес / кампус", set_save:"Сохранить",
      about_media_t:"Визуальные материалы проекта",
      about_media_p:"Интерфейс, готовый для кампуса: прозрачное меню, безопасность по аллергенам и обучение устойчивости.",
      about_m1:"Единая официальная страница меню на неделю снижает путаницу.",
      about_m2:"Питание и аллергены помогают выбирать безопаснее.",
      about_m3:"Углеродные метрики можно использовать в обучении и отчётности.",
      about_scope_t:"Объём и развитие", about_scope_p1:"Для пилота достаточно парсинга недельного меню и небольшой базы рецептов. Со временем можно расширить: проверенные рецепты кухни и более сильный датасет эмиссий.",
      about_scope_p2:"GitHub Pages — статичный хостинг. Для авто‑обновления при новом PDF можно добавить GitHub Action: скачать PDF → конвертировать в JSON → перезапуск сайта.",
      footer_note:"GreenPlate • Демо в одном HTML с “страницами” • Замените данные на официальный источник.",
      modal_ing:"Ингредиенты", modal_all:"Аллергены", modal_nut:"Пищевая ценность", modal_steps:"Шаги", modal_close:"Закрыть",
      btn_recipe:"Рецепт", btn_ing:"Ингредиенты", btn_all:"Аллергены",
      tag_kcal:"ккал", tag_co2:"кг CO₂e"
    }
  };

  let LANG = localStorage.getItem("gp_lang") || "en";

  const fmt = {
    kcal: (n)=> `${Math.round(n)} ${I18N[LANG].tag_kcal}`,
    kg: (n)=> `${(Math.round(n*100)/100).toFixed(2)} ${I18N[LANG].tag_co2}`
  };

  function t(key){ return (I18N[LANG] && I18N[LANG][key]) ? I18N[LANG][key] : (I18N.en[key] || key); }
  function pick(obj){ return (obj && obj[LANG]) ? obj[LANG] : (obj && obj.en) ? obj.en : obj; }

  // =============================
  // State
  // =============================
  const state = {
    day: Object.keys(MENU)[0],
    portions: Number(localStorage.getItem("gp_portions") || "1") || 1,
    lowCarbonOnly: false,
    glutenFreeOnly: false,
    recipeQuery: ""
  };

  // =============================
  // Core calculations
  // =============================
  function scaled(dish){
    const p = Math.max(1, Number(state.portions) || 1);
    return {
      ...dish,
      calories_kcal: dish.calories_kcal * p,
      co2_kg: dish.co2_kg * p,
      macros_g: {
        protein: dish.macros_g.protein * p,
        carbs: dish.macros_g.carbs * p,
        fat: dish.macros_g.fat * p
      }
    };
  }

  function isGlutenFree(dish){
    // if any language contains "gluten" word, treat as not GF
    const all = [...(dish.allergens.en||[]), ...(dish.allergens.tr||[]), ...(dish.allergens.ru||[])].join(" ").toLowerCase();
    return !all.includes("gluten") && !all.includes("глют") && !all.includes("glüten");
  }

  function isLowCarbon(dish){
    return dish.co2_kg <= 1.0; // demo threshold
  }

  // =============================
  // Router (multi-page feel, one file)
  // =============================
  const routes = {
    "/what": "page-what",

    "/home": "page-home",
    "/menu": "page-menu",
    "/recipes": "page-recipes",
    "/sustainability": "page-sustainability",
    "/method": "page-method",
    "/about": "page-about"
  };

  function currentRoute(){
    const h = (location.hash || "#/home").replace("#", "");
    return routes[h] ? h : "/home";
  }

  function showPage(route){
    Object.values(routes).forEach(id=>{
      document.getElementById(id).classList.remove("active");
    });
    document.getElementById(routes[route]).classList.add("active");

    // nav active
    document.querySelectorAll(".pill[data-route]").forEach(a=>{
      a.classList.toggle("active", a.getAttribute("data-route") === route);
    });

    // render route-dependent content
    if(route === "/menu"){ renderDayChips(); renderMenu(); }
    if(route === "/recipes"){ renderRecipes(); }
    if(route === "/sustainability"){ renderChart(); renderTotals(); }
    window.scrollTo({ top: 0, behavior: "instant" });
  }

  window.addEventListener("hashchange", ()=>showPage(currentRoute()));

  // =============================
  // Rendering helpers
  // =============================
  const el = (id)=>document.getElementById(id);

  function applyI18n(){
    document.querySelectorAll("[data-i18n]").forEach(node=>{
      node.textContent = t(node.getAttribute("data-i18n"));
    });
    document.querySelectorAll(".langBtn").forEach(b=>{
      b.classList.toggle("active", b.getAttribute("data-lang")===LANG);
    });
    // update placeholders
    const rs = el("recipeSearch");
    if(rs) rs.placeholder = (LANG==="tr" ? "Ara…" : LANG==="ru" ? "Поиск…" : "Search…");

    renderKpis();
    const route = currentRoute();
    showPage(route);
  }

  function setLang(lang){
    LANG = lang;
    localStorage.setItem("gp_lang", LANG);
    applyI18n();
  }

  function renderDayChips(){
    const holder = el("dayChips");
    if(!holder) return;
    holder.innerHTML = "";
    Object.keys(MENU).forEach(day=>{
      const b = document.createElement("button");
      b.className = "miniBtn" + (day===state.day ? " primary":"");
      b.textContent = day;
      b.onclick = ()=>{ state.day=day; renderMenu(); renderKpis(); renderChart(); renderTotals(); };
      holder.appendChild(b);
    });
  }

  function getVisibleDishes(){
    let dishes = MENU[state.day].map(scaled);
    if(state.lowCarbonOnly) dishes = dishes.filter(isLowCarbon);
    if(state.glutenFreeOnly) dishes = dishes.filter(isGlutenFree);
    return dishes;
  }

  function dishTitle(d){
    const nm = d.name;
    return pick(nm);
  }

  function renderMenu(){
    const grid = el("menuGrid");
    if(!grid) return;
    grid.innerHTML = "";
    const dishes = getVisibleDishes();

    dishes.forEach(d=>{
      const title = dishTitle(d);
      const subtitle = LANG === "en" ? d.name.tr : d.name.en; // show "other" for context
      const desc = pick(d.description);

      const card = document.createElement("div");
      card.className = "card dish";
      card.innerHTML = `
        <div class="dishTop">
          <div>
            <h3>${title} <span style="color:var(--muted); font-weight:800;">• ${subtitle}</span></h3>
            <div class="meta">
              <span class="tag">${fmt.kcal(d.calories_kcal)}</span>
              <span class="tag gray">${fmt.kg(d.co2_kg)}</span>
              <span class="tag gray">${Math.round(d.macros_g.protein)}P • ${Math.round(d.macros_g.carbs)}C • ${Math.round(d.macros_g.fat)}F</span>
            </div>
          </div>
        </div>
        <p>${desc}</p>
        <div class="actions">
          <button class="miniBtn primary" data-recipe="${d.id}">${t("btn_recipe")}</button>
          <button class="miniBtn" data-ing="${d.id}">${t("btn_ing")}</button>
          <button class="miniBtn" data-all="${d.id}">${t("btn_all")}</button>
        </div>
      `;
      grid.appendChild(card);
    });

    grid.querySelectorAll("[data-recipe]").forEach(btn=>{
      btn.addEventListener("click", ()=>openModal(btn.getAttribute("data-recipe"), "full"));
    });
    grid.querySelectorAll("[data-ing]").forEach(btn=>{
      btn.addEventListener("click", ()=>openModal(btn.getAttribute("data-ing"), "ingredients"));
    });
    grid.querySelectorAll("[data-all]").forEach(btn=>{
      btn.addEventListener("click", ()=>openModal(btn.getAttribute("data-all"), "allergens"));
    });
  }

  function flattenAllDishes(){
    const map = new Map();
    for(const day of Object.keys(MENU)){
      for(const d of MENU[day]){
        map.set(d.id, d);
      }
    }
    return [...map.values()];
  }

  function renderRecipes(){
    const grid = el("recipesGrid");
    if(!grid) return;
    grid.innerHTML = "";
    const q = (state.recipeQuery || "").toLowerCase().trim();

    const items = flattenAllDishes().filter(d=>{
      if(!q) return true;
      const hay = [d.name.en, d.name.tr, d.name.ru, pick(d.description)].join(" ").toLowerCase();
      return hay.includes(q);
    }).map(scaled);

    items.forEach(d=>{
      const card = document.createElement("div");
      card.className = "card dish";
      card.innerHTML = `
        <div class="dishTop">
          <div>
            <h3>${pick(d.name)} <span style="color:var(--muted); font-weight:800;">• ${d.name.tr}</span></h3>
            <div class="meta">
              <span class="tag">${fmt.kcal(d.calories_kcal)}</span>
              <span class="tag gray">${fmt.kg(d.co2_kg)}</span>
            </div>
          </div>
        </div>
        <p>${pick(d.description)}</p>
        <div class="actions">
          <button class="miniBtn primary" data-recipe="${d.id}">${t("btn_recipe")}</button>
        </div>
      `;
      grid.appendChild(card);
    });

    grid.querySelectorAll("[data-recipe]").forEach(btn=>{
      btn.addEventListener("click", ()=>openModal(btn.getAttribute("data-recipe"), "full"));
    });
  }

  function renderTotals(){
    const all = MENU[state.day].map(scaled);
    const totalCO2 = all.reduce((s,x)=>s+x.co2_kg,0);
    const tc = el("totalCO2");
    if(tc) tc.textContent = fmt.kg(totalCO2);
  }

  function renderKpis(){
    const visible = getVisibleDishes();
    const all = MENU[state.day].map(scaled);
    const totalKcal = all.reduce((s,x)=>s+x.calories_kcal,0);
    const totalCO2 = all.reduce((s,x)=>s+x.co2_kg,0);

    el("kpiDishes").textContent = String(visible.length);
    el("kpiCalories").textContent = fmt.kcal(totalKcal);
    el("kpiCO2").textContent = fmt.kg(totalCO2);
  }

  // =============================
  // Modal
  // =============================
  function findDish(id){
    for(const day of Object.keys(MENU)){
      const d = MENU[day].find(x=>x.id===id);
      if(d) return scaled(d);
    }
    return null;
  }

  function openModal(id, mode="full"){
    const d = findDish(id);
    if(!d) return;

    el("mTitle").textContent = `${pick(d.name)} • ${d.name.tr}`;
    el("mMeta").innerHTML = `
      <span class="tag">${fmt.kcal(d.calories_kcal)}</span>
      <span class="tag gray">${fmt.kg(d.co2_kg)}</span>
      <span class="tag gray">${Math.round(d.macros_g.protein)}P • ${Math.round(d.macros_g.carbs)}C • ${Math.round(d.macros_g.fat)}F</span>
    `;

    el("mIngr").innerHTML = pick(d.ingredients).map(x=>`<li>${x}</li>`).join("");
    el("mAll").innerHTML = pick(d.allergens).map(x=>`<li>${x}</li>`).join("");
    el("mNut").innerHTML = `
      <li><b>Protein:</b> ${Math.round(d.macros_g.protein)} g</li>
      <li><b>Carbs:</b> ${Math.round(d.macros_g.carbs)} g</li>
      <li><b>Fat:</b> ${Math.round(d.macros_g.fat)} g</li>
      <li><b>Carbon footprint:</b> ${fmt.kg(d.co2_kg)}</li>
    `;
    el("mSteps").innerHTML = pick(d.recipe_steps).map(s=>`<li>${s}</li>`).join("");

    // mode focus
    const boxes = document.querySelectorAll(".modalBody .box");
    boxes.forEach(b=>b.style.display="");

    if(mode==="ingredients"){
      el("mAll").closest(".box").style.display = "none";
      el("mNut").closest(".box").style.display = "none";
      el("mSteps").closest(".box").style.display = "none";
    } else if(mode==="allergens"){
      el("mIngr").closest(".box").style.display = "none";
      el("mNut").closest(".box").style.display = "none";
      el("mSteps").closest(".box").style.display = "none";
    }

    el("modal").style.display = "grid";
  }

  function closeModal(){ el("modal").style.display = "none"; }
  el("mClose").addEventListener("click", closeModal);
  el("modal").addEventListener("click", (e)=>{ if(e.target.id==="modal") closeModal(); });
  document.addEventListener("keydown", (e)=>{ if(e.key==="Escape") closeModal(); });

  // =============================
  // Chart
  // =============================
  let chart = null;
  function renderChart(){
    const all = MENU[state.day].map(scaled);
    const labels = all.map(d=>pick(d.name));
    const values = all.map(d=>d.co2_kg);

    const canvas = document.getElementById("co2Chart");
    if(!canvas) return;

    if(chart) chart.destroy();
    chart = new Chart(canvas, {
      type: "bar",
      data: { labels, datasets: [{ label: "kg CO₂e", data: values }] },
      options: { responsive: true, plugins: { legend: { display: true } }, scales: { y: { beginAtZero: true } } }
    });
  }

  // =============================
  // Events
  // =============================
  el("portionInput").value = String(state.portions);

  el("portionInput").addEventListener("input", (e)=>{
    state.portions = Math.max(1, Number(e.target.value) || 1);
    localStorage.setItem("gp_portions", String(state.portions));
    renderMenu(); renderRecipes(); renderKpis(); renderTotals(); renderChart();
  });

  el("filterLowCarbon").addEventListener("change", (e)=>{
    state.lowCarbonOnly = e.target.checked;
    renderMenu(); renderKpis();
  });

  el("filterGlutenFree").addEventListener("change", (e)=>{
    state.glutenFreeOnly = e.target.checked;
    renderMenu(); renderKpis();
  });

  el("openPdfBtn").addEventListener("click", ()=>{
    const url = (el("pdfUrl").value || "").trim();
    if(!url) return;
    window.open(url, "_blank", "noopener");
  });

  el("recipeSearch").addEventListener("input", (e)=>{
    state.recipeQuery = e.target.value || "";
    renderRecipes();
  });

  document.querySelectorAll(".langBtn").forEach(btn=>{
    btn.addEventListener("click", ()=>setLang(btn.getAttribute("data-lang")));
  });

  // University settings (demo)
  function loadUni(){
    const data = JSON.parse(localStorage.getItem("gp_uni") || "{}");
    if(data.logo) el("uniLogo").src = data.logo;
    if(data.name) { el("uniName").textContent = data.name; el("aboutUniName").textContent = data.name; }
    if(data.addr) { el("uniAddr").textContent = data.addr; el("aboutUniAddr").textContent = data.addr; }
    const pdfHost = (()=>{ try{ return new URL(el("pdfUrl").value).host; } catch { return "—"; } })();
    el("aboutUniPdf").textContent = pdfHost || "—";
    // fill inputs
    el("uniLogoUrl").value = data.logo || el("uniLogo").src;
    el("uniNameInput").value = data.name || el("uniName").textContent;
    el("uniAddrInput").value = data.addr || el("uniAddr").textContent;
  }
  el("saveUniBtn").addEventListener("click", ()=>{
    const data = {
      logo: el("uniLogoUrl").value.trim(),
      name: el("uniNameInput").value.trim(),
      addr: el("uniAddrInput").value.trim()
    };
    localStorage.setItem("gp_uni", JSON.stringify(data));
    loadUni();
  });

  // Init
  loadUni();
  applyI18n();
  renderDayChips();
  renderMenu();
  renderRecipes();
  renderKpis();
  renderTotals();
  renderChart();
  showPage(currentRoute());
</script>
</body>
</html>
